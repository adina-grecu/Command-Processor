The command file is being read in bytes using FileInputStream and the getChannel() method, which returns a FileChannel. The file size is saved in a variable called fileSize, and then the total size is divided by P threads to obtain an initial chunkSize. P-1 threads receive this chunkSize as a parameter, representing the portion of the command file they will read, while the last thread receives the remaining portion to ensure no commands are lost.

Three ByteBuffers are used, with two of them allocated with a size of 2 bytes. These buffers are used to verify if the command chunk is properly delimited, meaning it consists only of complete commands (lines). The start position (or "cursor") is moved to the right until the beginning of a line is found, and the size is decreased accordingly. If the portion ends in the middle of a command, the size is increased to allow reading more bytes. The last buffer is allocated with the size value, which is updated based on the two verification steps (adjusting the chunk limits).

For reading, the read method from FileChannel is used, which reads from the command file into the specified buffer, starting from the start position (or start + size for the final limit check). Initially, each thread has its start set from chunkSize to chunkSize (in the main loop, the start value increases by chunkSize at each iteration). After reading, the content of the buffer is saved in a String variable.